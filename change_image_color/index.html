<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>change image color</title>
    <style>
        #color_list{display: flex; flex-wrap: wrap; gap: 10px;}
        #color_list li{list-style-type: none; width: 50px; aspect-ratio: 1;}
    </style>
</head>
<body>
        <!-- <img id="myImage" src="images/red-grey.png" alt="Image"> -->
        <img id="myImage" src="images/red-grey.png" alt="Image">

        <canvas id="myCanvas"></canvas>
        <!-- <input type="color" id="colorPicker" value=""> -->
        <ul id="color_list">
            <li data-tab="#FF0000"></li>
            <li data-tab="#4AC229"></li>
            <li data-tab="#EE00FF"></li>
            <li data-tab="#0008FF"></li>
            <li data-tab="#00FBFF"></li>
            <li data-tab="#00FF59"></li>
            <li data-tab="#CCFF00"></li>
        </ul>
        <!-- <button >Apply Color Overlay</button> -->

        <script>
            var canvas = document.getElementById('myCanvas');
var ctx = canvas.getContext('2d');
var image = document.getElementById('myImage');
var colorPicker = document.getElementById('colorPicker');
var overlayColor = null 

document.querySelectorAll('#color_list li').forEach(e=>{
    e.style.backgroundColor = e.getAttribute('data-tab');
})

document.querySelectorAll('#color_list li').forEach(e=>{
    e.addEventListener('click', function(){
        applyColorOverlay(this.getAttribute('data-tab'));
    } )
})

canvas.width = image.width;
canvas.height = image.height;

function applyColorOverlay(my_color) {
    overlayColor = hexToRgb(my_color);
    drawImageWithOverlay();
}

function drawImageWithOverlay() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw the original image
    ctx.drawImage(image, 0, 0, canvas.width, canvas.height);

    // Apply color overlay
    ctx.globalCompositeOperation = 'color';
    ctx.fillStyle = `rgba(${overlayColor[0]}, ${overlayColor[1]}, ${overlayColor[2]})`;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.globalCompositeOperation = 'source-over';
}

function hexToRgb(hex) {
    hex = hex.replace('#', '');
    return [
        parseInt(hex.substring(0, 2), 16),
        parseInt(hex.substring(2, 4), 16),
        parseInt(hex.substring(4, 6), 16)
    ];
}

image.onload = drawImageWithOverlay;

// document.querySelector('button').addEventListener('click',applyColorOverlay);

        </script>
</body>
</html>